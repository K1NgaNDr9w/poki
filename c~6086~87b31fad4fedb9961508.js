"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[6086],{6086:(e,t,o)=>{o.r(t),o.d(t,{showFeedbackEpic:()=>H,voteEpic:()=>N,voteFeedbackGivenEpic:()=>O});var a,r,n,i=o(8661),l=o(1893),d=o(4848),s=o(5069),c=o(1545),u=o(2817),p=o(7877),g=o(533),m=o(4406),f=o(4975),v=o(4978),h=o(8389),x=o(5322),_=o(6084),b=o(8855),w=o(7344),y=o(3748),k=o(8656),E=o(6151),D=o(111),I=o(8813),C=o(5585),A=o(7447);function N(e,t,o){let{createApi:a}=o;return e.pipe((0,s.l)(h.Ns.type),(0,p.z)((e=>{let{gameId:o,direction:r,source:n}=e;const i=a(t.value,"vote");return(0,y.A)("rating",n,{method:"click",previousVote:(0,x.bF)(t.value,o)}),i("/vote",{method:"POST",body:JSON.stringify({game_id:o,vote:r})}).pipe((0,g.l)())})))}function O(e,t,o){let{createApi:a}=o;return e.pipe((0,s.l)(h.CE.type),(0,m.p)(6e4),(0,p.z)((e=>{var o;let{voteDirection:r,message:n}=e;if(!n)return c.E;const i=a(t.value,"tracking"),l=(0,_.d)(t.value),d=(0,b.R6)(t.value),s=(0,w.lH)(t.value),u=(0,k.J1)(t.value),p=(0,E.N9)(t.value),m=(0,b.FK)(t.value),f=(0,b.tL)(t.value),v=(0,C.W)(t.value),h=d.gameID===u.pokifordevs_game_id?d.gameVersion:void 0,x=(null==v||null===(o=v.page)||void 0===o?void 0:o.start)>0?Date.now()-v.page.start:0,y=document.getElementById("game-element");let D;y&&(D="".concat(y.clientWidth,"x").concat(y.clientHeight));return i("/playground-feedback",{method:"POST",body:JSON.stringify({p4d_game_id:u.pokifordevs_game_id,p4d_version_id:h,type:1===r?"thumbs_up":"thumbs_down",site_id:s.id,message:n,experiment:l,adblock:p,was_fullscreen:m,game_resolution:D,loading_finished:f,time_on_page:x})}).pipe((0,g.l)())})))}const P=l.ZP.textarea.withConfig({componentId:"sc-xijagl-0"})(["font:14px/20px var(--fontProximaNova);background:var(--grey-7);border:2px solid var(--grey-5);color:var(--grey-3);border-radius:8px;margin:5px 0 1px 6px;height:86px;max-width:308px;width:100%;padding:12px 16px 0;resize:none;transition:background-color .2s ease-in-out;&:focus{outline:2px solid var(--grey-7);border-color:var(--poki-blue);background:var(--grey-9);}"]),L=(0,l.F4)(["0%{transform:rotate(0deg);}40%{transform:rotate(20deg);}43%{transform:rotate(25deg);}60%{transform:rotate(-15deg);}70%{transform:rotate(3deg);}80%{transform:rotate(-1deg);}85%{transform:rotate(0deg);}100%{transform:rotate(0deg);}"]),S=l.ZP.div.withConfig({componentId:"sc-xijagl-1"})(["margin:0 13px 0 0;flex-shrink:0;&:hover{animation:"," 1s forwards;}"],L),j=(0,l.ZP)(A.default).withConfig({componentId:"sc-xijagl-2"})(["fill:var(--denim-blue);",""],(e=>{let{inverted:t}=e;return t&&"transform: scale3d(-1, -1, 1);"})),F=l.ZP.img.withConfig({componentId:"sc-xijagl-3"})(["position:absolute;bottom:0;left:0;width:176px;height:88px;border-radius:8px;z-index:-1;"]),B=l.ZP.div.withConfig({componentId:"sc-xijagl-4"})(["display:flex;align-items:center;padding:4px 0 0;font:700 12px/1 var(--fontProximaNova);text-transform:uppercase;color:var(--grey-3);strong{display:block;color:var(--denim-blue);font:18px/20px var(--fontTorus);text-transform:none;}"]);function H(e,t){return e.pipe((0,s.l)(h.Ns.type),(0,f.h)((e=>{let{gameId:o}=e;return(0,x.jG)(t.value,o)})),(0,v.w)((e=>{let{direction:o}=e;const l=(0,D.B)(t.value),s=Date.now(),p="feedback-input-".concat(s),g=(0,k.J1)(t.value);if(!g)return c.E;const m=(1===o?l.whatdoyoulike:l.whatdontyoulike).replace("%title","<strong>".concat(g.title,"?</strong>")),f=(0,d.Dq)(i.default.createElement(B,null,i.default.createElement(S,null,1===o?a||(a=i.default.createElement(j,{name:"thumbsUp",height:"24",width:"24"})):r||(r=i.default.createElement(j,{name:"thumbsUp",inverted:!0,height:"24",width:"24"}))),i.default.createElement("div",{dangerouslySetInnerHTML:{__html:m}}))),v={notification:{title:l.thank_you,theme:"feedback",autoExpire:4e3}},x={title:f,id:s,message:i.default.createElement(i.default.Fragment,null,i.default.createElement(P,{id:p,placeholder:l.enteryourtext}),n||(n=i.default.createElement(F,{src:"https://a.poki.com/images/star_feedback_v2.svg",alt:""}))),clickOutsideToClose:!0,actions:[{title:l.send,onClick:()=>{const e=document.getElementById(p).value;window.store.dispatch((0,h.CE)({voteDirection:o,message:e})),window.store.dispatch((0,I._I)({id:s})),window.store.dispatch((0,I.sc)(v))}}]};return(0,u.of)((0,I.sc)({notification:x}))})))}}}]);